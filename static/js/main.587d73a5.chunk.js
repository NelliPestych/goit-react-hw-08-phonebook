(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{129:function(t,e,n){},130:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),u=n(23),s=n(70),i=n(21),l=n(4),g=n(24),b=n(48),f=n.n(b),d=n(22),m=n(39),O={key:"auth",storage:f.a,whitelist:["token"]},j={key:"items",storage:f.a,whitelist:["items"]},h=Object(l.a)({reducer:{contacts:Object(g.g)(j,m.c),auth:Object(g.g)(O,d.b)},middleware:Object(l.d)({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}})}),E=Object(g.h)(h),v=n(26),p=n(32),C=n.n(p);var _=Object(v.a)((function(t){var e=t.isAuthenticated;return a.a.createElement("div",{className:C.a.nav},a.a.createElement(i.b,{to:"/",exact:!0,className:C.a.list_link,activeClassName:C.a.list_activeLink},"Home"),e&&a.a.createElement(i.b,{to:"/contacts",exact:!0,className:C.a.list_link,activeClassName:C.a.list_activeLink},"Contacts"))})),k=n(71),S=n.n(k),R=n(145),q=n(46),y=n.n(q);function U(t){var e=t.avatar,n=t.name,r=t.isLoading,c=t.onLogout;return a.a.createElement(a.a.Fragment,null,!r&&a.a.createElement("div",{className:y.a.userMenu_container},a.a.createElement("img",{className:y.a.userMenu_img,src:e,alt:"avatar"}),a.a.createElement("p",{className:y.a.userMenu_text},"Welcome ",n," "),a.a.createElement(R.a,{type:"button",onClick:c,variant:"contained",color:"primary"},"LogOut")))}U.defaultProps={avatar:"https://icon-library.net/images/avatar-icon-images/avatar-icon-images-7.jpg"};var N={onLogout:d.a.logout},L=Object(u.b)((function(t){return{name:d.c.getUserName(t),isLoading:d.c.getLoader(t)}}),N)(U),x=n(33),A=n.n(x);var M=function(){return a.a.createElement("div",{className:A.a.auth_nav},a.a.createElement(i.b,{to:"/registration",exact:!0,className:A.a.list_link,activeClassName:A.a.list_activeLink},"Registration"),a.a.createElement(i.b,{to:"/login",exact:!0,className:A.a.list_link,activeClassName:A.a.list_activeLink},"Login"))};var w=Object(v.a)((function(t){var e=t.isAuthenticated;return a.a.createElement("header",{className:S.a.header},a.a.createElement(_,null),e?a.a.createElement(L,null):a.a.createElement(M,null))})),z=n(9),P=[{name:"Home",path:"/",exact:!0,component:Object(r.lazy)((function(){return n.e(2).then(n.bind(null,216))})),private:!1,restricted:!1},{name:"Login",path:"/login",exact:!0,component:Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,217))})),private:!1,restricted:!0},{name:"Registration",path:"/registration",exact:!0,showInMenu:!0,component:Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,218))})),private:!1,restricted:!0},{name:"Contacts",path:"/contacts",exact:!0,component:Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(1)]).then(n.bind(null,219))})),private:!0,restricted:!1}],B=n(45);var G=Object(v.a)((function(t){var e=t.component,n=t.isAuthenticated,r=Object(B.a)(t,["component","isAuthenticated"]);return a.a.createElement(z.b,Object.assign({},r,{render:function(t){return n?a.a.createElement(e,t):a.a.createElement(z.a,{to:"/login"})}}))}));var I=Object(v.a)((function(t){var e=t.component,n=t.isAuthenticated,r=Object(B.a)(t,["component","isAuthenticated"]);return a.a.createElement(z.b,Object.assign({},r,{render:function(t){return n&&r.restricted?a.a.createElement(z.a,{to:"/contacts"}):a.a.createElement(e,t)}}))})),D=n(67),F=n(76),W=n.n(F);var H=function(){return a.a.createElement("div",{className:W.a.container},a.a.createElement(r.Suspense,{fallback:a.a.createElement(D.a,null)},a.a.createElement(z.d,null,P.map((function(t){return t.private?a.a.createElement(G,Object.assign({key:t.name},t)):a.a.createElement(I,Object.assign({key:t.name},t))})),a.a.createElement(z.a,{to:"/"}))))},J=n(54),T=n(55),Z=n(57),V=n(56),K=n(52),Q=n(41),X=n(6),Y=(n(128),function(t){Object(Z.a)(n,t);var e=Object(V.a)(n);function n(){return Object(J.a)(this,n),e.apply(this,arguments)}return Object(T.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.error;Object(K.b)("\ud83e\udd84 ".concat(e)),setTimeout((function(){t.props.toggleError()}),5e3)}},{key:"render",value:function(){return a.a.createElement(K.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,rtl:!1})}}]),n}(r.Component)),$={toggleError:X.a.toggleError},tt=Object(u.b)((function(t){return{error:Q.a.getError(t)}}),$)(Y),et=function(t){var e=t.error,n=t.onGetCurrentUser;t.onClearToken;return Object(r.useEffect)((function(){n()}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null),a.a.createElement(H,null),e&&a.a.createElement(tt,null))},nt={onGetCurrentUser:d.a.getCurrentUser},rt=Object(u.b)((function(t){return{userName:d.c.getUserName(t),error:m.d.getError(t)}}),nt)(et);n(129);o.a.render(a.a.createElement(u.a,{store:h},a.a.createElement(s.a,{loading:null,persistor:E},a.a.createElement(i.a,null,a.a.createElement(rt,null)))),document.getElementById("root"))},22:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return R}));var r=n(16),a=n.n(r),c=n(3);a.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var o,u,s,i,l=function(t){a.a.defaults.headers.common.Authorization="Bearer ".concat(t)},g=function(){a.a.defaults.headers.common.Authorization=""},b={register:function(t){return function(e){e(c.a.registerRequest()),a.a.post("/users/signup",t).then((function(t){var n=t.data;l(n.token),e(c.a.registerSuccess(n))})).catch((function(t){var n=t.message;return e(c.a.registerError(n))}))}},login:function(t){return function(e){e(c.a.loginRequest()),a.a.post("/users/login",t).then((function(t){var n=t.data;l(n.token),e(c.a.loginSuccess(n))})).catch((function(t){var n=t.message;return e(c.a.loginError(n))}))}},logout:function(){return function(t){t(c.a.logoutRequest()),a.a.post("/users/logout").then((function(){g(),t(c.a.logoutSuccess())})).catch((function(e){var n=e.message;return t(c.a.logoutError(n))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(l(n),t(c.a.getCurrentUserRequest()),a.a.get("/users/current").then((function(e){var n=e.data;return t(c.a.getCurrentUserSuccess(n))})).catch((function(e){var n=e.message;return t(c.a.getCurrentUserError(n))})))}}},f={isAuthenticated:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name},getLoader:function(t){return t.auth.loading}},d=n(2),m=n(4),O=n(11),j={user:{name:"",email:""},token:null,loading:!1,error:""},h=function(t,e){return e.payload.user},E=function(t,e){return e.payload.token},v=function(t,e){return e.payload},p=function(){return null},C=Object(m.c)(j.user,(o={},Object(d.a)(o,c.a.registerSuccess,h),Object(d.a)(o,c.a.loginSuccess,h),Object(d.a)(o,c.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(d.a)(o,c.a.logoutSuccess,(function(){return j.user})),o)),_=Object(m.c)(j.token,(u={},Object(d.a)(u,c.a.registerSuccess,E),Object(d.a)(u,c.a.loginSuccess,E),Object(d.a)(u,c.a.logoutSuccess,(function(){return null})),u)),k=Object(m.c)(j.loading,(s={},Object(d.a)(s,c.a.registerRequest,(function(){return!0})),Object(d.a)(s,c.a.loginRequest,(function(){return!0})),Object(d.a)(s,c.a.logoutRequest,(function(){return!0})),Object(d.a)(s,c.a.getCurrentUserRequest,(function(){return!0})),Object(d.a)(s,c.a.registerSuccess,(function(){return!1})),Object(d.a)(s,c.a.loginSuccess,(function(){return!1})),Object(d.a)(s,c.a.getCurrentUserSuccess,(function(){return!1})),Object(d.a)(s,c.a.logoutSuccess,(function(){return!1})),Object(d.a)(s,c.a.registerError,(function(){return!1})),Object(d.a)(s,c.a.loginError,(function(){return!1})),Object(d.a)(s,c.a.getCurrentUserError,(function(){return!1})),Object(d.a)(s,c.a.logoutError,(function(){return!1})),s)),S=Object(m.c)(j.error,(i={},Object(d.a)(i,c.a.loginRequest,p),Object(d.a)(i,c.a.logoutRequest,p),Object(d.a)(i,c.a.registerRequest,p),Object(d.a)(i,c.a.getCurrentUserRequest,p),Object(d.a)(i,c.a.registerError,v),Object(d.a)(i,c.a.loginError,v),Object(d.a)(i,c.a.getCurrentUserError,v),Object(d.a)(i,c.a.logoutError,v),i)),R=Object(O.c)({user:C,token:_,error:S,loading:k})},26:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(22),o=n(23);e.a=function(t){return Object(o.b)((function(t){return{isAuthenticated:c.c.isAuthenticated(t)}}))((function(e){return a.a.createElement(t,e)}))}},3:function(t,e,n){"use strict";var r=n(4),a=Object(r.b)("auth/registerRequest"),c=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),l=Object(r.b)("auth/logoutRequest"),g=Object(r.b)("auth/logoutSuccess"),b=Object(r.b)("auth/logoutError"),f=Object(r.b)("auth/getCurrentUserRequest"),d=Object(r.b)("auth/getCurrentUserSuccess"),m=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:a,registerSuccess:c,registerError:o,loginRequest:u,loginSuccess:s,loginError:i,logoutRequest:l,logoutSuccess:g,logoutError:b,getCurrentUserRequest:f,getCurrentUserSuccess:d,getCurrentUserError:m}},32:function(t,e,n){t.exports={nav:"Navigation_nav__3Z-Pr",list_link:"Navigation_list_link__2DS1D",list_activeLink:"Navigation_list_activeLink__1BWyZ"}},33:function(t,e,n){t.exports={auth_nav:"AuthNav_auth_nav__2kmhh",list_link:"AuthNav_list_link__12Cd9",list_activeLink:"AuthNav_list_activeLink___pih6"}},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return l.a})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return c.a}));var r=n(16),a=n.n(r),c=n(6);a.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var o,u,s,i={getContacts:function(){return function(t){t(c.a.getContactsRequest()),a.a.get("/contacts").then((function(e){var n=e.data;return t(c.a.getContactsSuccess(n))})).catch((function(e){var n=e.message;return t(c.a.getContactsError(n))}))}},addContact:function(t){return function(e){e(c.a.addContactRequest()),a.a.post("/contacts",t).then((function(t){var n=t.data;return e(c.a.addContactSuccess(n))})).catch((function(t){var n=t.message;return e(c.a.addContactError(n))}))}},deleteContact:function(t){return function(e){e(c.a.deleteContactRequest(t)),a.a.delete("/contacts/".concat(t)).then((function(){return e(c.a.deleteContactSuccess(t))})).catch((function(t){var n=t.message;return e(c.a.deleteContactError(n))}))}}},l=n(41),g=n(2),b=n(51),f=n(4),d=n(11),m=n(3),O={items:[],filter:"",isLoading:!1,error:""},j=Object(f.c)(O.items,(o={},Object(g.a)(o,c.a.getContactsSuccess,(function(t,e){var n=e.payload;return Object(b.a)(n)})),Object(g.a)(o,c.a.addContactSuccess,(function(t,e){return[e.payload].concat(Object(b.a)(t))})),Object(g.a)(o,c.a.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(g.a)(o,m.a.logoutSuccess,(function(){return O.items})),o)),h=Object(f.c)(O.filter,Object(g.a)({},c.a.filterContacts,(function(t,e){return e.payload}))),E=Object(f.c)(O.isLoading,(u={},Object(g.a)(u,c.a.getContactsRequest,(function(){return!0})),Object(g.a)(u,c.a.getContactsSuccess,(function(){return!1})),Object(g.a)(u,c.a.getContactsError,(function(){return!1})),Object(g.a)(u,c.a.addContactRequest,(function(){return!0})),Object(g.a)(u,c.a.addContactSuccess,(function(){return!1})),Object(g.a)(u,c.a.addContactError,(function(){return!1})),Object(g.a)(u,c.a.deleteContactRequest,(function(){return!0})),Object(g.a)(u,c.a.deleteContactSuccess,(function(){return!1})),Object(g.a)(u,c.a.deleteContactError,(function(){return!1})),u)),v=Object(f.c)(O.error,(s={},Object(g.a)(s,c.a.getContactsError,(function(t,e){return e.payload})),Object(g.a)(s,c.a.addContactError,(function(t,e){return e.payload})),Object(g.a)(s,c.a.deleteContactError,(function(t,e){return e.payload})),Object(g.a)(s,c.a.toggleError,(function(){return""})),s)),p=Object(d.c)({items:j,filter:h,loading:E,error:v})},41:function(t,e,n){"use strict";var r=n(14),a=function(t){return t.contacts.items},c=function(t){return t.contacts.filter},o=Object(r.a)([a,c],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))})),u=Object(r.a)([function(t,e){return e},a],(function(t,e){return e.find((function(e){return e.id===t}))}));e.a={getContacts:a,getFilter:c,getError:function(t){return t.contacts.error},getLoading:function(t){return t.contacts.loading},getVisibleContacts:o,getContactById:u}},46:function(t,e,n){t.exports={userMenu_container:"UserMenu_userMenu_container__18Ivh",userMenu_img:"UserMenu_userMenu_img__Wvbui",userMenu_text:"UserMenu_userMenu_text__1GoGz"}},6:function(t,e,n){"use strict";var r=n(4),a=Object(r.b)("contacts/getRequest"),c=Object(r.b)("contacts/getSuccess"),o=Object(r.b)("contacts/getError"),u=Object(r.b)("contacts/addRequest"),s=Object(r.b)("contacts/addSuccess"),i=Object(r.b)("contacts/addError"),l=Object(r.b)("contacts/deleteRequest"),g=Object(r.b)("contacts/deleteSuccess"),b=Object(r.b)("contacts/deleteError"),f=Object(r.b)("contacts/filter"),d=Object(r.b)("contacts/toggleError");e.a={getContactsRequest:a,getContactsSuccess:c,getContactsError:o,addContactRequest:u,addContactSuccess:s,addContactError:i,deleteContactRequest:l,deleteContactSuccess:g,deleteContactError:b,filterContacts:f,toggleError:d}},67:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(75),o=n.n(c);e.a=function(){return a.a.createElement(o.a,{type:"Puff",color:"#3f51b5",height:100,width:100,timeout:3e3})}},71:function(t,e,n){t.exports={header:"Appbar_header__18upN"}},76:function(t,e,n){t.exports={container:"Content_container__1luB4"}},81:function(t,e,n){t.exports=n(130)}},[[81,6,7]]]);
//# sourceMappingURL=main.587d73a5.chunk.js.map